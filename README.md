# ImageEnhancement

This project performs image enhancement on a source image. Much improvements can be seen in low light images and 
high dynamic range images. It is done in two steps.
1. Contrast Enhancement
2. Synthetic Exposure Fusion

## Contrast Enhancement

This module is mostly implementation of [Global and Local Contrast Adaptive Enhancement for Non-Uniform Illumination 
Color Images](https://ieeexplore.ieee.org/document/8265568)

Local and Global contrast enhancement is performed on source image. For local contrast enhancement CLAHE is used. 
For global contrast enhancement Joint Histogram Equiization is used. These images are then blended together with 
help of weigth maps.

## Synthetic Exposure Fusion

This module is implementation of [Automatic exposure compensation using an image segmentation method for 
single-image-based multi-exposure fusion](https://www.cambridge.org/core/journals/apsipa-transactions-on-signal-and-information-processing/article/automatic-exposure-compensation-using-an-image-segmentation-method-for-singleimagebased-multiexposure-fusion/48592C697600A1889FCC3EDD5D5570B3)

Gamma correction is appliedd on source image. Afterwards the source image is segmented based upon luminosity values. 
Multiple synthetic images are generated by scaling luminance of source image based upon image segments. These images
are then combined by using Exposure Fusion.

### Pipeline

- Source image is feeded into the pipeline. It is then passed to Contrast Enhancement module. 
- If source image is dark
  - Source image is passed to synthetic exposure fusion module with gamma correction of 1/2.2
- Else
  - Result of Contrast Enhancement is passed to synthetic exposure fusion module with gamma correction of 2.2
- Original Image and result of both modules are merged using Exposure Fusion

### Usage

Required Library:
- OpenCV

Enter path of source image in synef.cpp and run it. You might want to resize image as it takes much longer on higher 
resolution images.

### Results

<img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-input/1.jpg" width ="405" /> <img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-output/1.jpg" width ="405" />

<img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-input/2.jpg" width ="405" /> <img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-output/2.jpg" width ="405" />

<img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-input/8.jpg" width ="405" /> <img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-output/8.jpg" width ="405" />

<img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-input/9.jpg" width ="405" /> <img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-output/9.jpg" width ="405" />

<img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-input/10.jpg" width ="405" /> <img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-output/10.jpg" width ="405" />

<img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-input/15.jpg" width ="405" /> <img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-output/15.jpg" width ="405" />

<img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-input/19.jpg" width ="405" /> <img src = "https://github.com/ahmed-zubair-1998/ImageEnhancement/blob/master/test-output/19.jpg" width ="405" />

See specific folders for more results.

